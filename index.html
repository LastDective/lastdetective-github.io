<!doctype html>
<html lang="zh"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>Bruce Liu&#039;s Blog</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="Bruce Liu&#039;s Blog"><meta name="msapplication-TileImage" content="/img/favicon.svg"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="Bruce Liu&#039;s Blog"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="Bruce Liu个人站，主要涉及前端知识共享、实践教程、前沿技术共同学习等方面"><meta property="og:type" content="blog"><meta property="og:title" content="Bruce Liu&#039;s Blog"><meta property="og:url" content="http://yoursite.com/"><meta property="og:site_name" content="Bruce Liu&#039;s Blog"><meta property="og:description" content="Bruce Liu个人站，主要涉及前端知识共享、实践教程、前沿技术共同学习等方面"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="http://yoursite.com/img/og_image.png"><meta property="article:author" content="Bruce Liu"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="/img/og_image.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"http://yoursite.com"},"headline":"Bruce Liu's Blog","image":["http://yoursite.com/img/og_image.png"],"author":{"@type":"Person","name":"Bruce Liu"},"publisher":{"@type":"Organization","name":"Bruce Liu's Blog","logo":{"@type":"ImageObject","url":"http://yoursite.com/img/logo.svg"}},"description":"Bruce Liu个人站，主要涉及前端知识共享、实践教程、前沿技术共同学习等方面"}</script><link rel="icon" href="/img/favicon.svg"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.2/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/css/justifiedGallery.min.css"><!--!--><!--!--><style>.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#3273dc;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}</style><script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js"></script><!--!--><!--!--><meta name="generator" content="Hexo 5.0.2"></head><body class="is-2-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/logo.svg" alt="Bruce Liu&#039;s Blog" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item is-active" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a><a class="navbar-item search" title="搜索" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-8-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2022-06-09T02:28:09.000Z" title="2022-6-9 10:28:09">2022-06-09</time>发表</span><span class="level-item"><time dateTime="2022-11-12T09:38:02.070Z" title="2022-11-12 17:38:02">2022-11-12</time>更新</span><span class="level-item">1 分钟读完 (大约137个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2022/06/09/docker%E6%9B%B4%E6%94%B9%E9%BB%98%E8%AE%A4%E5%AD%98%E5%82%A8%E4%BD%8D%E7%BD%AE/">docker更改默认存储位置</a></h1><div class="content"><p><code>docker</code> 容器默认安装在系统盘，一般情况下系统盘比较小，随着镜像和容器的不断增加，可能回出现容量不够的情况，所以需要手动指定 <code>docker</code> 相关文件的存储位置</p>
<p>编辑  <code>/etc/docker/daemon.json</code> 文件</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/docker/daemon.json </span><br></pre></td></tr></table></figure>
<p>增加相关配置</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;registry-mirrors&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;http://hub-mirror.c.163.com&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;data-root&quot;</span><span class="punctuation">:</span> <span class="string">&quot;/www/docker&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
<p>其中 <code>registry-mirror</code> 指定镜像仓库的源</p>
<p><code>data-root</code> 指定镜像和容器的存储路径</p>
<p>保存之后重启 <code>docker</code></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart docker</span><br></pre></td></tr></table></figure>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2022-06-06T09:39:14.000Z" title="2022-6-6 17:39:14">2022-06-06</time>发表</span><span class="level-item"><time dateTime="2022-11-12T09:38:02.061Z" title="2022-11-12 17:38:02">2022-11-12</time>更新</span><span class="level-item">几秒读完 (大约0个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2022/06/06/DevOps%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/">DevOps学习记录</a></h1><div class="content"></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2021-01-05T06:46:03.000Z" title="2021-1-5 14:46:03">2021-01-05</time>发表</span><span class="level-item"><time dateTime="2022-11-12T09:38:02.084Z" title="2022-11-12 17:38:02">2022-11-12</time>更新</span><span class="level-item">4 分钟读完 (大约546个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/01/05/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E8%AE%BE%E8%AE%A1%E5%8E%9F%E5%88%99/">设计模式设计原则</a></h1><div class="content"><ul>
<li><p><strong>单一职责原则(Single Responsibility Principle,SRP)</strong></p>
<p>一个类只负责一个功能领域中的相应职责。或者可以定义为：就一个类而言，应该只有一个引起它变化的原因。</p>
</li>
<li><p><strong>开闭原则（Open-Closed Principle,OCP）</strong></p>
<p>一个软件实体应当对扩展开放，对修改关闭。即软件实体应尽量在不修改原有代码的情况下进行扩展。</p>
</li>
<li><p><strong>里氏替换原则（Liskov Substitution Principle,LSP）</strong></p>
<p>所有引用基类（父类）的地方必须透明地使用其子类对象。</p>
<p>里氏替换原则表名，在软件中将一个基类对象替换成它的子类对象，程序将不会产生任何错误和异常，反过来不成立，如果一个软件实体使用的是一个子类对象的话，那么它一定能够使用基类对象。</p>
</li>
<li><p><strong>依赖倒置原则（Dependency Inversion Princople,DIP）</strong></p>
<p>抽象不应该依赖于细节，细节应当依赖于抽象。换言之，要针对接口变成，而不是针对实现编程。</p>
<p>以来倒置原则要求在程序代码中传递参数时或在关联关系中，尽量引用高层次的抽象层类，即使用接口和抽象类进行变量类型声明、参数类型声明、方法返回类型声明，以及数据类型转换等，而不要用具体类来做这些事情。</p>
<p><strong>开闭原则</strong>是<strong><em>目标</em></strong>，<strong>里氏代换</strong>是<strong><em>基础</em></strong>，<strong>依赖倒置原则</strong>是<strong><em>手段</em></strong>，它们相辅相成。</p>
</li>
<li><p><strong>接口隔离原则(Interface Segregation Principle,ISP)</strong></p>
<p>使用多个专门的接口，而不使用单一的总接口，即客户端不应该依赖那些它不需要的接口。</p>
</li>
<li><p><strong>合成复用原则</strong>（Composition/Aggregate Reuse Principle,CARP）</p>
<p>尽量使用对象组合，而不是继承来达到复用的目的</p>
</li>
<li><p><strong>迪米特法则（Law of Demeter,LoD）</strong></p>
<p>一个软件实体应当尽可能少地与其他实体发生相互作用。</p>
</li>
</ul>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2020-12-27T11:00:40.000Z" title="2020-12-27 19:00:40">2020-12-27</time>发表</span><span class="level-item"><time dateTime="2022-11-12T09:38:02.066Z" title="2022-11-12 17:38:02">2022-11-12</time>更新</span><span class="level-item">10 分钟读完 (大约1452个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2020/12/27/MysqlExplain%E7%9A%84type%E5%AD%97%E6%AE%B5/">MysqlExplain的type字段</a></h1><div class="content"><h2 id="join-type"><a href="#join-type" class="headerlink" title="join type"></a>join type</h2><p><code>mysql</code> 使用 <code>explain</code> 命令进行分析时 <code>type</code> 字段会有下面几种 <code>join type</code>类型</p>
<p>查询效率<strong>由好到差</strong></p>
<ul>
<li><p><strong>system</strong></p>
<p>这个表只有一行（这个表是系统表），这是 <code>join type</code> =  <code>const</code> 的一种特殊形式</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">EXPLAIN <span class="keyword">SELECT</span></span><br><span class="line">    <span class="operator">*</span> </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">    `mysql`.`proxies_priv`</span><br></pre></td></tr></table></figure>
<p>查询结果如下</p>
<p>| id   | select_type | table        | partitions | type | possible_keys | key  | key_len | ref  | rows | filtered | Extra |<br>| —- | ———– | ———— | ———- | —- | ————- | —- | ——- | —- | —- | ——– | —– |<br>| 1    | SIMPLE      | proxies_priv | system     |      |               |      |         | 1    | 100  |          |       |</p>
</li>
<li><p><strong>const</strong></p>
<p>表中只有一行匹配的数据，在 <code>where</code> 条件中和所有 </p>
<p>1)<code>主键</code></p>
<p>2) 唯一键</p>
<p>进行比较时会用到 <code>const</code></p>
<p>比如有如下表</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE `tb_name` (</span><br><span class="line">  `pp1` varchar(255) COLLATE utf8mb4_bin DEFAULT NULL,</span><br><span class="line">  `pp2` varchar(255) COLLATE utf8mb4_bin DEFAULT NULL,</span><br><span class="line">  `f3` varchar(255) COLLATE utf8mb4_bin DEFAULT NULL,</span><br><span class="line">  `f4` varchar(255) COLLATE utf8mb4_bin DEFAULT NULL,</span><br><span class="line">  UNIQUE KEY `pp1` (`pp1`,`pp2`)</span><br><span class="line">) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin;</span><br><span class="line"></span><br><span class="line">INSERT INTO `db02`.`tb_name`(`pp1`, `pp2`, `f3`, `f4`) VALUES (&#x27;1&#x27;, &#x27;2&#x27;, &#x27;3&#x27;, &#x27;4&#x27;);</span><br><span class="line">INSERT INTO `db02`.`tb_name`(`pp1`, `pp2`, `f3`, `f4`) VALUES (&#x27;2&#x27;, &#x27;3&#x27;, &#x27;4&#x27;, &#x27;5&#x27;);</span><br></pre></td></tr></table></figure>
<p>执行如下查询</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">EXPLAIN SELECT</span><br><span class="line">    * </span><br><span class="line">FROM</span><br><span class="line">    `tb_name` </span><br><span class="line">WHERE</span><br><span class="line">    pp1 = &#x27;1&#x27; </span><br><span class="line">    AND pp2 = &#x27;2&#x27;</span><br><span class="line">## 或者</span><br><span class="line">EXPLAIN SELECT</span><br><span class="line">    * </span><br><span class="line">FROM</span><br><span class="line">    `tb_name` </span><br><span class="line">WHERE</span><br><span class="line">    pp2 = &#x27;2&#x27; </span><br><span class="line">    AND pp1 = &#x27;1&#x27;</span><br><span class="line">都会使用 const</span><br></pre></td></tr></table></figure>
<p>结果如下</p>
<p>| id   | select_type | table   | partitions | type  | possible_keys | key  | key_len | ref         | rows | filtered | Extra |<br>| —- | ———– | ——- | ———- | —– | ————- | —- | ——- | ———– | —- | ——– | —– |<br>| 1    | SIMPLE      | tb_name |            | const | pp1           | pp1  | 2046    | const,const | 1    | 100      |       |</p>
</li>
<li><p><strong>eq_ref</strong></p>
<p>前表的每一行，在后表中只有一行被扫描</p>
<blockquote>
<p>One row is read from this table for each combination of rows from the previous tables.</p>
</blockquote>
<p>有如下两张表</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE `students` (</span><br><span class="line">  `id` int(11) NOT NULL,</span><br><span class="line">  `name` varchar(255) COLLATE utf8mb4_bin DEFAULT NULL,</span><br><span class="line">  `age` int(3) DEFAULT NULL,</span><br><span class="line">  PRIMARY KEY (`id`)</span><br><span class="line">) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin;</span><br><span class="line"></span><br><span class="line">INSERT INTO `db02`.`students`(`id`, `name`, `age`) VALUES (1, &#x27;张三&#x27;, 23);</span><br><span class="line">INSERT INTO `db02`.`students`(`id`, `name`, `age`) VALUES (2, &#x27;李四&#x27;, 33);</span><br><span class="line"></span><br><span class="line">CREATE TABLE `scores` (</span><br><span class="line">  `user_id` int(11) NOT NULL,</span><br><span class="line">  `score` int(255) DEFAULT NULL</span><br><span class="line">) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin;\</span><br><span class="line">INSERT INTO `db02`.`scores`(`user_id`, `score`) VALUES (1, 100);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">EXPLAIN SELECT</span><br><span class="line">    * </span><br><span class="line">FROM</span><br><span class="line">    students t1,</span><br><span class="line">    scores t2 </span><br><span class="line">WHERE</span><br><span class="line">    t1.id = t2.user_id</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>可见 <code>scores</code> 表中只有一条数据，结果如下，</p>
<p>| id   | select_type | table | partitions | type   | possible_keys | key     | key_len | ref             | rows | filtered | Extra |<br>| —- | ———– | —– | ———- | —— | ————- | ——- | ——- | ————— | —- | ——– | —– |<br>| 1    | SIMPLE      | t2    |            | ALL    | PRIMARY       |         |         |                 | 1    | 100      |       |<br>| 1    | SIMPLE      | t1    |            | eq_ref | PRIMARY       | PRIMARY | 4       | db02.t2.user_id | 1    | 100      |       |</p>
<p>如果再往 <code>score</code> 表中 插入一行数据，则会变为全表扫描</p>
</li>
<li><p><strong>ref</strong></p>
<p>非唯一性索引扫描，返回匹配某个单独值的所有行. 这个索引</p>
<p>1) 不是 <strong>主键</strong> 也不是 <strong>唯一键</strong></p>
<p>或者</p>
<p>2）使用最左匹配原则进行匹配</p>
<p>ref 虽然使用了索引，但是查询结果并不唯一，但是并不需要扫描全表，因为索引时有序的</p>
<p>有如下两个表</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE `tb_ref` (</span><br><span class="line">  `f1` varchar(255) COLLATE utf8mb4_bin DEFAULT NULL,</span><br><span class="line">  `f2` varchar(255) COLLATE utf8mb4_bin DEFAULT NULL,</span><br><span class="line">  `f3` varchar(255) COLLATE utf8mb4_bin DEFAULT NULL,</span><br><span class="line">  `f4` varchar(255) COLLATE utf8mb4_bin DEFAULT NULL,</span><br><span class="line">  KEY `index_tb_ref_f1` (`f1`)</span><br><span class="line">) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin;</span><br><span class="line">## 一定要多添 `tb_ref` 一定要多添加几条数据，如果数据太少 mysql 直接会使用全表扫描 type=ALL</span><br><span class="line">INSERT INTO `tb_ref`(`f1`, `f2`, `f3`, `f4`) VALUES (&#x27;1&#x27;, &#x27;2&#x27;, &#x27;3&#x27;, &#x27;4&#x27;);</span><br><span class="line">INSERT INTO `tb_ref`(`f1`, `f2`, `f3`, `f4`) VALUES (&#x27;2&#x27;, &#x27;2&#x27;, &#x27;3&#x27;, &#x27;4&#x27;);</span><br><span class="line">INSERT INTO `tb_ref`(`f1`, `f2`, `f3`, `f4`) VALUES (&#x27;2&#x27;, &#x27;2&#x27;, &#x27;3&#x27;, &#x27;4&#x27;);</span><br><span class="line">INSERT INTO `tb_ref`(`f1`, `f2`, `f3`, `f4`) VALUES (&#x27;2&#x27;, &#x27;2&#x27;, &#x27;3&#x27;, &#x27;4&#x27;);</span><br><span class="line">INSERT INTO `tb_ref`(`f1`, `f2`, `f3`, `f4`) VALUES (&#x27;2&#x27;, &#x27;2&#x27;, &#x27;3&#x27;, &#x27;4&#x27;);</span><br><span class="line">INSERT INTO `tb_ref`(`f1`, `f2`, `f3`, `f4`) VALUES (&#x27;2&#x27;, &#x27;2&#x27;, &#x27;3&#x27;, &#x27;4&#x27;);</span><br><span class="line">INSERT INTO `tb_ref`(`f1`, `f2`, `f3`, `f4`) VALUES (&#x27;2&#x27;, &#x27;2&#x27;, &#x27;3&#x27;, &#x27;4&#x27;);</span><br><span class="line">INSERT INTO `tb_ref`(`f1`, `f2`, `f3`, `f4`) VALUES (&#x27;2&#x27;, &#x27;2&#x27;, &#x27;3&#x27;, &#x27;4&#x27;);</span><br><span class="line">INSERT INTO `tb_ref`(`f1`, `f2`, `f3`, `f4`) VALUES (&#x27;2&#x27;, &#x27;2&#x27;, &#x27;3&#x27;, &#x27;4&#x27;);</span><br><span class="line">INSERT INTO `tb_ref`(`f1`, `f2`, `f3`, `f4`) VALUES (&#x27;2&#x27;, &#x27;2&#x27;, &#x27;3&#x27;, &#x27;4&#x27;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">CREATE TABLE `other_table` (</span><br><span class="line">  `ref_f1` varchar(255) COLLATE utf8mb4_bin NOT NULL,</span><br><span class="line">  `age` int(3) DEFAULT NULL,</span><br><span class="line">  `name` varchar(255) COLLATE utf8mb4_bin DEFAULT NULL</span><br><span class="line">) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin;</span><br><span class="line"></span><br><span class="line">INSERT INTO `other_table`(`ref_f1`, `age`, `name`) VALUES (&#x27;1&#x27;, 22, &#x27;张三&#x27;);</span><br><span class="line">INSERT INTO `other_table`(`ref_f1`, `age`, `name`) VALUES (&#x27;1&#x27;, 23, &#x27;张1三&#x27;);</span><br><span class="line">INSERT INTO `other_table`(`ref_f1`, `age`, `name`) VALUES (&#x27;2&#x27;, 23, &#x27;张1三&#x27;);</span><br><span class="line">INSERT INTO `other_table`(`ref_f1`, `age`, `name`) VALUES (&#x27;2&#x27;, 23, &#x27;张1三&#x27;);</span><br><span class="line">INSERT INTO `other_table`(`ref_f1`, `age`, `name`) VALUES (&#x27;2&#x27;, 23, &#x27;张1三&#x27;);</span><br><span class="line">INSERT INTO `other_table`(`ref_f1`, `age`, `name`) VALUES (&#x27;2&#x27;, 23, &#x27;张1三&#x27;);</span><br><span class="line">INSERT INTO `other_table`(`ref_f1`, `age`, `name`) VALUES (&#x27;2&#x27;, 23, &#x27;张1三&#x27;);</span><br><span class="line">INSERT INTO `other_table`(`ref_f1`, `age`, `name`) VALUES (&#x27;2&#x27;, 23, &#x27;张1三&#x27;);</span><br><span class="line">INSERT INTO `other_table`(`ref_f1`, `age`, `name`) VALUES (&#x27;2&#x27;, 23, &#x27;张1三&#x27;);</span><br></pre></td></tr></table></figure>
<p>执行如下语句</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">EXPLAIN SELECT</span><br><span class="line">    * </span><br><span class="line">FROM</span><br><span class="line">    tb_ref </span><br><span class="line">WHERE</span><br><span class="line">    f1=&#x27;1&#x27;</span><br></pre></td></tr></table></figure>
<p>结果如下：</p>
<p>| id   | select_type | table  | partitions | type | possible_keys   | key             | key_len | ref   | rows | filtered | Extra |<br>| —- | ———– | —— | ———- | —- | ————— | ————— | ——- | —– | —- | ——– | —– |<br>| 1    | SIMPLE      | tb_ref |            | ref  | index_tb_ref_f1 | index_tb_ref_f1 | 1023    | const | 1    | 100      |       |</p>
<p>执行如下语句</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">EXPLAIN SELECT</span><br><span class="line">    * </span><br><span class="line">FROM</span><br><span class="line">    tb_ref t1,</span><br><span class="line">    other_table t2 </span><br><span class="line">WHERE</span><br><span class="line">    t1.f1 = t2.ref_f1</span><br></pre></td></tr></table></figure>
<p>返回结果</p>
</li>
</ul>
<table>
<thead>
<tr>
<th>id</th>
<th>select_type</th>
<th>table</th>
<th>partitions</th>
<th>type</th>
<th>possible_keys</th>
<th>key</th>
<th>key_len</th>
<th>ref</th>
<th>rows</th>
<th>filtered</th>
<th>Extra</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>SIMPLE</td>
<td>t2</td>
<td></td>
<td>ALL</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>9</td>
<td>100</td>
<td></td>
</tr>
<tr>
<td>1</td>
<td>SIMPLE</td>
<td>t1</td>
<td></td>
<td>ref</td>
<td>index_tb_ref_f1</td>
<td>index_tb_ref_f1</td>
<td>1023</td>
<td>db02.t2.ref_f1</td>
<td>1</td>
<td>100</td>
</tr>
</tbody>
</table>
<ul>
<li><p><strong>range</strong></p>
<p>range 是范围扫描，当比较索引列包含 </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">=, &lt;&gt;, &gt;, &gt;=, &lt;,&lt;=, IS NULL, &lt;=&gt;, BETWEEN, LIKE, or IN() </span><br></pre></td></tr></table></figure>
<p>时，可能产生 <code>range</code></p>
<blockquote>
<p>Only rows that are in a given range are retrieved, using an index to select the rows. The key column in the output row indicates which index is used. The key_len contains the longest key part that was used. The ref column is NULL for this type. range can be used when a key column is compared to a constant using any of the =, &lt;&gt;, &gt;, &gt;=, &lt;, &lt;=, IS NULL, &lt;=&gt;, BETWEEN, LIKE, or IN() operators: SELECT <em> FROM tbl_name WHERE key_column = 10; SELECT </em> FROM tbl_name WHERE key_column BETWEEN 10 and 20; SELECT <em> FROM tbl_name 1351 EXPLAIN Output Format WHERE key_column IN (10,20,30); SELECT </em> FROM tbl_name WHERE key_part1 = 10 AND key_part2 IN (10,20,30);</p>
</blockquote>
</li>
</ul>
<h2 id="覆盖索引（covering-index）"><a href="#覆盖索引（covering-index）" class="headerlink" title="覆盖索引（covering index）"></a>覆盖索引（covering index）</h2><p>理解方式一：就是select的数据列只从索引中就能取得，不必读取数据行，mysql可以利用索引返回select列表中的字段，而不必根据索引再次读取数据文件，欢聚话说查询列要被所建的索引覆盖。</p>
<p>理解方式二：索引是高校找到行的一个方法，但是一般数据库也能使用索引找到一个列的数据，因此它不必读取真个行，毕竟索引的叶子节点存储了它们索引的数据；当能通过读取索引你就可以得到想要的数据，那就不需要读取行了。一个索引包含了（或覆盖了）满足查询结果的数据就叫索引。</p>
<p>注意：</p>
<p>如果要使用覆盖索引，一定要注意select列表中只取出需要的列，不可 select *,</p>
<p>因为如果将所有字段一起做索引会导致索引文件过大，查询性能下降。</p>
<h2 id="explan-分析执行顺序的例子"><a href="#explan-分析执行顺序的例子" class="headerlink" title="explan 分析执行顺序的例子"></a>explan 分析执行顺序的例子</h2><p>来自尚硅谷的例子</p>
<p><img src="https://wx3.sinaimg.cn/mw690/730892e4ly1gm4ky7z1s0j20rh0bdajz.jpg" alt=""></p>
<p><img src="https://wx1.sinaimg.cn/mw690/730892e4ly1gm4kydabr5j20px01hmyq.jpg" alt=""></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2020-12-24T07:50:26.000Z" title="2020-12-24 15:50:26">2020-12-24</time>发表</span><span class="level-item"><time dateTime="2022-11-12T09:38:02.064Z" title="2022-11-12 17:38:02">2022-11-12</time>更新</span><span class="level-item">几秒读完 (大约101个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2020/12/24/HashMap%E9%9D%A2%E8%AF%95%E9%A2%98/">HashMap面试题</a></h1><div class="content"><h2 id="问题一"><a href="#问题一" class="headerlink" title="问题一"></a>问题一</h2><p>为什么容量一定是2的幂？<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hash &amp; (length-1)</span><br></pre></td></tr></table></figure></p>
<p>如果 <code>length</code> = 16，则 <code>length-1</code> = 15=1111;</p>
<p>如果hash 是一个32 位的整数，最后四位是 1001</p>
<p>…. …. …. 1001</p>
<p>&amp;             1111</p>
<p>​                1001</p>
<p>所以使用这种按位与的方法很容易，求出 <code>hash % length</code> 的值</p>
<p>JAVA 8 HashMap的改进</p>
<p>数组+链表/红黑树</p>
<p>扩容时插入顺序的改进</p>
<p>函数方法</p>
<p>​       forEach</p>
<p>​       compute系列</p>
<p>Map的新Api</p>
<p>​       merge</p>
<p>​       replace</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2020-10-22T08:01:13.000Z" title="2020-10-22 16:01:13">2020-10-22</time>发表</span><span class="level-item"><time dateTime="2022-11-12T09:38:02.084Z" title="2022-11-12 17:38:02">2022-11-12</time>更新</span><span class="level-item">几秒读完 (大约67个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2020/10/22/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E7%9B%B8%E5%85%B3/">正则表达式相关</a></h1><div class="content"><h2 id="提取中括号中间的内容"><a href="#提取中括号中间的内容" class="headerlink" title="提取中括号中间的内容"></a>提取中括号中间的内容</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">String s = &quot;[102.8164002309, 24.9892758419], [102.8165296922, 24.9887447331], [102.8168627242, 24.9887980873], [102.8169049102, 24.9890462091], [102.816831012, 24.989382232], [102.8166749033, 24.9893820851], [102.8164002309, 24.9892758419]&quot;;</span><br><span class="line">        // 包含中括号</span><br><span class="line">        Pattern pattern = Pattern.compile(&quot;(\\[.*?])&quot;);</span><br><span class="line">        // 不包含中括号</span><br><span class="line">        Pattern pattern1 = Pattern.compile(&quot;\\[(.*?)]&quot;);</span><br><span class="line"></span><br><span class="line">        Matcher matcher = pattern.matcher(s);</span><br><span class="line">        while (matcher.find()) &#123;</span><br><span class="line">            System.out.println(matcher.group(1));</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(&quot;------------------------&quot;);</span><br><span class="line">        Matcher matcher2 = pattern1.matcher(s);</span><br><span class="line">        while (matcher2.find()) &#123;</span><br><span class="line">            System.out.println(matcher2.group(1));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>打印结果如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[102.8164002309, 24.9892758419]</span><br><span class="line">[102.8165296922, 24.9887447331]</span><br><span class="line">[102.8168627242, 24.9887980873]</span><br><span class="line">[102.8169049102, 24.9890462091]</span><br><span class="line">[102.816831012, 24.989382232]</span><br><span class="line">[102.8166749033, 24.9893820851]</span><br><span class="line">[102.8164002309, 24.9892758419]</span><br><span class="line">------------------------</span><br><span class="line">102.8164002309, 24.9892758419</span><br><span class="line">102.8165296922, 24.9887447331</span><br><span class="line">102.8168627242, 24.9887980873</span><br><span class="line">102.8169049102, 24.9890462091</span><br><span class="line">102.816831012, 24.989382232</span><br><span class="line">102.8166749033, 24.9893820851</span><br><span class="line">102.8164002309, 24.9892758419</span><br></pre></td></tr></table></figure>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2020-09-16T03:03:12.000Z" title="2020-9-16 11:03:12">2020-09-16</time>发表</span><span class="level-item"><time dateTime="2022-11-12T09:38:02.076Z" title="2022-11-12 17:38:02">2022-11-12</time>更新</span><span class="level-item">2 分钟读完 (大约287个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2020/09/16/mysql-groupby%E6%8A%A5%E9%94%99/">mysql-groupby报错</a></h1><div class="content"><h2 id="mysql-groupBy问题"><a href="#mysql-groupBy问题" class="headerlink" title="mysql groupBy问题"></a>mysql groupBy问题</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ERROR 1055 (42000): Expression #1 of SELECT list is not in GROUP BY clause and contains nonaggregated column &#x27;xxx&#x27; which is not </span><br><span class="line">functionally dependent on columns  in GROUP BY clause; this is incompatible with sql_mode=only_full_group_by</span><br></pre></td></tr></table></figure>
<h3 id="解决办法一"><a href="#解决办法一" class="headerlink" title="解决办法一"></a>解决办法一</h3><ol>
<li><p>查询 sql_mode</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select @@global.sql_mode;</span><br></pre></td></tr></table></figure>
<p>结果如下</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION</span><br></pre></td></tr></table></figure>
<p>只需要将上面的 <code>ONLY_FULL_GROUP_BY</code> 去掉就行</p>
<p>使用如下语句</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">set @@global.sql_mode=&#x27;STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION&#x27;;</span><br></pre></td></tr></table></figure>
<p>这种方法存在的问题</p>
<ol>
<li>在有些时候不生效</li>
<li>mysql重启之后配置失效</li>
</ol>
</li>
</ol>
<h3 id="解决办法二"><a href="#解决办法二" class="headerlink" title="解决办法二"></a>解决办法二</h3><p>打开 <code>mysql</code>配置文件 <code>my.cnf</code>,在最下面添加</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[mysqld]</span><br><span class="line">sql_mode=STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION</span><br></pre></td></tr></table></figure>
<p>使用这种方法会永久解决上面的报错问题</p>
<p>P.S. 如果 <code>mysql</code> 使用的是 <code>docker</code></p>
<p>在进入容器内部</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker exec -it my-mysql /bin/bash</span><br></pre></td></tr></table></figure>
<p>之后可能出现没有 <code>vi/vim</code> 工具导致无法修改配置文件</p>
<p>在此情况下首先执行 </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt-get update</span><br></pre></td></tr></table></figure>
<p>然后安装 vim</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt-get install vim</span><br></pre></td></tr></table></figure>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2020-08-31T06:55:02.000Z" title="2020-8-31 14:55:02">2020-08-31</time>发表</span><span class="level-item"><time dateTime="2022-11-12T09:38:02.076Z" title="2022-11-12 17:38:02">2022-11-12</time>更新</span><span class="level-item">9 分钟读完 (大约1386个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2020/08/31/maven%E7%9A%84%E4%BE%9D%E8%B5%96%E6%9C%BA%E5%88%B6/">maven的依赖机制</a></h1><div class="content"><h2 id="传递依赖关系（Transitive-Dependencies）"><a href="#传递依赖关系（Transitive-Dependencies）" class="headerlink" title="传递依赖关系（Transitive Dependencies）"></a>传递依赖关系（<code>Transitive Dependencies</code>）</h2><h3 id="依赖调解（Dependency-mediation）"><a href="#依赖调解（Dependency-mediation）" class="headerlink" title="依赖调解（Dependency mediation）"></a>依赖调解（<em>Dependency mediation</em>）</h3><p>这个机制决定了当遇到多个版本作为依赖项时，将选择该 <code>artifact</code> 的哪个版本。maven 使用 <code>最近定义（nearest definition）</code>的机制，就是说，它在maven关系树中使用最接近项目的以来关系版本。可以通过在当前工程的 <code>pom</code> 文件中在确保某个依赖的版本。当在<code>pom</code>中指定了某个依赖的不同版本时，以先声明的依赖版本为准</p>
<p> <code>（nearest definition）</code>它在maven关系树中使用最接近项目的以来关系版本，考虑下面的依赖树</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">A</span><br><span class="line">├── B</span><br><span class="line">│   └── C</span><br><span class="line">│       └── D 2.0</span><br><span class="line">└── E</span><br><span class="line">    └── D 1.0</span><br></pre></td></tr></table></figure>
<p>定义了 A B C 三个模块，其中有两个依赖关系 A-&gt;B-&gt;C-&gt;D ,A-&gt;E-&gt;D,当构建 A时，使用的D是1.0 版本，因为 A-E-D这个依赖关系更短，如果要在构建A时强制使用D2.0版本，可以在A的依赖中明确指定 D2.0,依赖树如下图</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">A</span><br><span class="line"> ├── B</span><br><span class="line"> │   └── C</span><br><span class="line"> │       └── D 2.0</span><br><span class="line"> ├── E</span><br><span class="line"> │   └── D 1.0</span><br><span class="line"> │</span><br><span class="line"> └── D 2.0 </span><br></pre></td></tr></table></figure>
<h2 id="依赖域（Dependency-Scope）"><a href="#依赖域（Dependency-Scope）" class="headerlink" title="依赖域（Dependency Scope）"></a>依赖域（<em>Dependency Scope</em>）</h2><ul>
<li><strong>compile</strong><br>This is the <strong><em>default</em></strong> scope, used if none is specified. Compile dependencies are available in all classpaths of a project. Furthermore, those dependencies are propagated to dependent projects.</li>
<li><strong>provided</strong><br>This is much like <code>compile</code>, but indicates you expect the JDK or a container to provide the dependency at runtime. For example, when building a web application for the Java Enterprise Edition, you would set the dependency on the Servlet API and related Java EE APIs to scope <code>provided</code> because the web container provides those classes. A dependency with this scope is added to the classpath used for compilation and test, but not the runtime classpath. It is not transitive.</li>
<li><strong>runtime</strong><br>This scope indicates that the dependency is not required for compilation, but is for execution. Maven includes a dependency with this scope in the runtime and test classpaths, but not the compile classpath.</li>
<li><strong>test</strong><br>This scope indicates that the dependency is not required for normal use of the application, and is only available for the test compilation and execution phases. This scope is not transitive. Typically this scope is used for test libraries such as JUnit and Mockito. It is also used for non-test libraries such as Apache Commons IO if those libraries are used in unit tests (src/test/java) but not in the model code (src/main/java).</li>
<li><strong>system</strong><br>This scope is similar to <code>provided</code> except that you have to provide the JAR which contains it explicitly. The artifact is always available and is not looked up in a repository.</li>
<li><strong>import</strong><br>This scope is only supported on a dependency of type <code>pom</code> in the <code>&lt;dependencyManagement&gt;</code> section. It indicates the dependency is to be replaced with the effective list of dependencies in the specified POM’s <code>&lt;dependencyManagement&gt;</code> section. Since they are replaced, dependencies with a scope of <code>import</code> do not actually participate in limiting the transitivity of a dependency.</li>
</ul>
<p>在maven多模块项目中，为了保持模块间依赖的统一，常规做法是在parent model中，使用dependencyManagement预定义所有模块需要用到的dependency(依赖)</p>
<p><a href="javascript:void(0"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a>;)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependencyManagement&gt;</span><br><span class="line">        &lt;dependencies&gt;</span><br><span class="line">            &lt;!-- Feign是一种声明式、模板化的HTTP客户端:以HTTP接口的形式暴露自身服务 --&gt;</span><br><span class="line">            &lt;dependency&gt;</span><br><span class="line">                &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;</span><br><span class="line">                &lt;artifactId&gt;spring-cloud-starter-feign&lt;/artifactId&gt;</span><br><span class="line">                &lt;version&gt;$&#123;spring-cloud-starter-feign.version&#125;&lt;/version&gt;</span><br><span class="line">            &lt;/dependency&gt;</span><br><span class="line">            &lt;!-- 支持面向方面的编程即AOP，包括spring-aop和AspectJ --&gt;</span><br><span class="line">            &lt;dependency&gt;</span><br><span class="line">                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">                &lt;artifactId&gt;spring-boot-starter-aop&lt;/artifactId&gt;</span><br><span class="line">                &lt;version&gt;$&#123;spring.boot.version&#125;&lt;/version&gt;</span><br><span class="line">            &lt;/dependency&gt;</span><br><span class="line">            &lt;dependency&gt;</span><br><span class="line">                &lt;groupId&gt;org.aspectj&lt;/groupId&gt;</span><br><span class="line">                &lt;artifactId&gt;aspectjrt&lt;/artifactId&gt;</span><br><span class="line">                &lt;version&gt;$&#123;aspectjrt.version&#125;&lt;/version&gt;</span><br><span class="line">            &lt;/dependency&gt;</span><br><span class="line">        &lt;/dependencies&gt;</span><br><span class="line">    &lt;/dependencyManagement&gt;</span><br></pre></td></tr></table></figure>
<p><a href="javascript:void(0"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a>;)</p>
<p>然后，子model根据实际需要引入parent中预定义的依赖</p>
<p><a href="javascript:void(0"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a>;)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependencies&gt;</span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;spring-boot-starter-aop&lt;/artifactId&gt;</span><br><span class="line">        &lt;/dependency&gt;</span><br><span class="line">    &lt;/dependencies&gt;</span><br></pre></td></tr></table></figure>
<p><a href="javascript:void(0"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a>;)</p>
<p>好处：</p>
<p>1、依赖统一管理(parent中定义，需要变动dependency版本，只要修改一处即可)；</p>
<p>2、代码简洁(子model只需要指定groupId、artifactId即可)</p>
<p>3、dependencyManagement只会影响现有依赖的配置，但不会引入依赖，即子model不会继承parent中dependencyManagement所有预定义的depandency，只引入需要的依赖即可，简单说就是“按需引入依赖”或者“按需继承”；因此，在parent中严禁直接使用depandencys预定义依赖，坏处是子model会自动继承depandencys中所有预定义依赖；</p>
<p>但是，问题也出现了：</p>
<p>单继承：maven的继承跟java一样，单继承，也就是说子model中只能出现一个parent标签；</p>
<p>parent模块中，dependencyManagement中预定义太多的依赖，造成pom文件过长，而且很乱；</p>
<p>如何让这些依赖可以分类并清晰的管理？</p>
<p>问题解决：import scope依赖</p>
<p>如何使用：</p>
<p>1、maven2.9以上版本</p>
<p>2、将dependency分类，每一类建立单独的pom文件</p>
<p>3、在需要使用到这些依赖的子model中，使用dependencyManagement管理依赖，并import scope依赖</p>
<p>3、注意：scope=import只能用在dependencyManagement里面,且仅用于type=pom的dependency</p>
<p>示例：</p>
<p><a href="javascript:void(0"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a>;)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependencyManagement&gt;</span><br><span class="line">    &lt;dependencies&gt;</span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;spring-boot-dependencies&lt;/artifactId&gt;</span><br><span class="line">            &lt;!-- 重要：版本号要和父模块中预定义的spring boot版本号保持一致 --&gt;</span><br><span class="line">            &lt;version&gt;$&#123;spring.boot.version&#125;&lt;/version&gt;</span><br><span class="line">            &lt;type&gt;pom&lt;/type&gt;</span><br><span class="line">            &lt;scope&gt;import&lt;/scope&gt;</span><br><span class="line">        &lt;/dependency&gt;</span><br><span class="line">    &lt;/dependencies&gt;</span><br><span class="line">&lt;/dependencyManagement&gt;</span><br></pre></td></tr></table></figure>
<p><a href="javascript:void(0"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a>;)</p>
<p> maven编译后，下载了pom文件，在maven的本地仓库下查看pom文件如下：</p>
<p><img src="https://images.cnblogs.com/cnblogs_com/huahua035/805112/o_QQ%e6%88%aa%e5%9b%be20171017111114.png" alt="img"></p>
<p>好处分析：</p>
<p>1、单一职责原则，根据依赖的分类，细化每一个单一职责的pom文件</p>
<p>2、解决单继承问题，通过import pom文件达到依赖的目的（典型的非继承模式），从而不用从父类中引用依赖</p>
<p>3、父模块的pom就会非常干净，容易维护</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2020-08-11T09:11:31.000Z" title="2020-8-11 17:11:31">2020-08-11</time>发表</span><span class="level-item"><time dateTime="2022-11-12T09:38:02.073Z" title="2022-11-12 17:38:02">2022-11-12</time>更新</span><span class="level-item">几秒读完 (大约19个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2020/08/11/java8tomap/">java8tomap</a></h1><div class="content"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> Map&lt;String, JSONObject&gt; moudlesDataMap =</span><br><span class="line">             allModulesData.stream()</span><br><span class="line">                     .collect(Collectors.toMap(</span><br><span class="line">                             item -&gt; (item.get(<span class="string">&quot;name&quot;</span>).toString()), item -&gt; item, (oldValue, newValue) -&gt; newValue));</span><br></pre></td></tr></table></figure>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2020-07-21T02:15:55.000Z" title="2020-7-21 10:15:55">2020-07-21</time>发表</span><span class="level-item"><time dateTime="2022-11-12T09:38:02.064Z" title="2022-11-12 17:38:02">2022-11-12</time>更新</span><span class="level-item">几秒读完 (大约0个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2020/07/21/JWT-Token%E5%9F%BA%E7%A1%80/">JWT Token基础</a></h1><div class="content"></div></article></div><nav class="pagination" role="navigation" aria-label="pagination"><div class="pagination-previous is-invisible is-hidden-mobile"><a href="/page/0/">上一页</a></div><div class="pagination-next"><a href="/page/2/">下一页</a></div><ul class="pagination-list is-hidden-mobile"><li><a class="pagination-link is-current" href="/">1</a></li><li><a class="pagination-link" href="/page/2/">2</a></li><li><span class="pagination-ellipsis">&hellip;</span></li><li><a class="pagination-link" href="/page/5/">5</a></li></ul></nav></div><div class="column column-left is-4-tablet is-4-desktop is-4-widescreen  order-1"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar" src="/img/avatar.png" alt="Your name"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">Your name</p><p class="is-size-6 is-block">Your title</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>Your location</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">文章</p><a href="/archives"><p class="title">49</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">分类</p><a href="/categories"><p class="title">0</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">标签</p><a href="/tags"><p class="title">1</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/ppoffice" target="_blank" rel="noopener">关注我</a></div><div class="level is-mobile is-multiline"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/ppoffice"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Facebook" href="https://facebook.com"><i class="fab fa-facebook"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Twitter" href="https://twitter.com"><i class="fab fa-twitter"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Dribbble" href="https://dribbble.com"><i class="fab fa-dribbble"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="RSS" href="/"><i class="fas fa-rss"></i></a></div></div></div><!--!--><div class="card widget" data-type="links"><div class="card-content"><div class="menu"><h3 class="menu-label">链接</h3><ul class="menu-list"><li><a class="level is-mobile" href="https://hexo.io" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Hexo</span></span><span class="level-right"><span class="level-item tag">hexo.io</span></span></a></li><li><a class="level is-mobile" href="https://bulma.io" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Bulma</span></span><span class="level-right"><span class="level-item tag">bulma.io</span></span></a></li></ul></div></div></div><!--!--><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">最新文章</h3><article class="media"><div class="media-content"><p class="date"><time dateTime="2022-06-09T02:28:09.000Z">2022-06-09</time></p><p class="title"><a href="/2022/06/09/docker%E6%9B%B4%E6%94%B9%E9%BB%98%E8%AE%A4%E5%AD%98%E5%82%A8%E4%BD%8D%E7%BD%AE/">docker更改默认存储位置</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2022-06-06T09:39:14.000Z">2022-06-06</time></p><p class="title"><a href="/2022/06/06/DevOps%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/">DevOps学习记录</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2021-01-05T06:46:03.000Z">2021-01-05</time></p><p class="title"><a href="/2021/01/05/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E8%AE%BE%E8%AE%A1%E5%8E%9F%E5%88%99/">设计模式设计原则</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2020-12-27T11:00:40.000Z">2020-12-27</time></p><p class="title"><a href="/2020/12/27/MysqlExplain%E7%9A%84type%E5%AD%97%E6%AE%B5/">MysqlExplain的type字段</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2020-12-24T07:50:26.000Z">2020-12-24</time></p><p class="title"><a href="/2020/12/24/HashMap%E9%9D%A2%E8%AF%95%E9%A2%98/">HashMap面试题</a></p></div></article></div></div><div class="card widget" data-type="archives"><div class="card-content"><div class="menu"><h3 class="menu-label">归档</h3><ul class="menu-list"><li><a class="level is-mobile" href="/archives/2022/06/"><span class="level-start"><span class="level-item">六月 2022</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/01/"><span class="level-start"><span class="level-item">一月 2021</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/12/"><span class="level-start"><span class="level-item">十二月 2020</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/10/"><span class="level-start"><span class="level-item">十月 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/09/"><span class="level-start"><span class="level-item">九月 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/08/"><span class="level-start"><span class="level-item">八月 2020</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/07/"><span class="level-start"><span class="level-item">七月 2020</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/06/"><span class="level-start"><span class="level-item">六月 2020</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/05/"><span class="level-start"><span class="level-item">五月 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/12/"><span class="level-start"><span class="level-item">十二月 2019</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/11/"><span class="level-start"><span class="level-item">十一月 2019</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/10/"><span class="level-start"><span class="level-item">十月 2019</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/08/"><span class="level-start"><span class="level-item">八月 2019</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/05/"><span class="level-start"><span class="level-item">五月 2019</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/03/"><span class="level-start"><span class="level-item">三月 2019</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/02/"><span class="level-start"><span class="level-item">二月 2019</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/01/"><span class="level-start"><span class="level-item">一月 2019</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/12/"><span class="level-start"><span class="level-item">十二月 2018</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/11/"><span class="level-start"><span class="level-item">十一月 2018</span></span><span class="level-end"><span class="level-item tag">6</span></span></a></li></ul></div></div></div><div class="card widget" data-type="tags"><div class="card-content"><div class="menu"><h3 class="menu-label">标签</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/docker/"><span class="tag">docker</span><span class="tag">2</span></a></div></div></div></div></div><div class="card widget" data-type="subscribe-email"><div class="card-content"><div class="menu"><h3 class="menu-label">订阅更新</h3><form action="https://feedburner.google.com/fb/a/mailverify" method="post" target="popupwindow" onsubmit="window.open(&#039;https://feedburner.google.com/fb/a/mailverify?uri=&#039;,&#039;popupwindow&#039;,&#039;scrollbars=yes,width=550,height=520&#039;);return true"><input type="hidden" value="" name="uri"><input type="hidden" name="loc" value="en_US"><div class="field has-addons"><div class="control has-icons-left is-expanded"><input class="input" name="email" type="email" placeholder="Email"><span class="icon is-small is-left"><i class="fas fa-envelope"></i></span></div><div class="control"><input class="button" type="submit" value="订阅"></div></div></form></div></div></div><div class="card widget"><div class="card-content"><div class="notification is-danger">You need to set <code>client_id</code> and <code>slot_id</code> to show this AD unit. Please set it in <code>_config.yml</code>.</div></div></div><div class="card widget" data-type="subscribe-email"><div class="card-content"><div class="menu"><h3 class="menu-label">follow.it</h3><form action="" method="post" target="_blank"><div class="field has-addons"><div class="control has-icons-left is-expanded"><input class="input" name="email" type="email" placeholder="Email"><span class="icon is-small is-left"><i class="fas fa-envelope"></i></span></div><div class="control"><input class="button" type="submit" value="订阅"></div></div></form></div></div></div></div><!--!--></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/logo.svg" alt="Bruce Liu&#039;s Blog" height="28"></a><p class="is-size-7"><span>&copy; 2022 Bruce Liu</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("zh-CN");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="回到顶端" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "此网站使用Cookie来改善您的体验。",
          dismiss: "知道了！",
          allow: "允许使用Cookie",
          deny: "拒绝",
          link: "了解更多",
          policy: "Cookie政策",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="想要查找什么..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"想要查找什么...","untitled":"(无标题)","posts":"文章","pages":"页面","categories":"分类","tags":"标签"});
        });</script></body></html>